/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.7
 *
 */
(function(e){e.fn.extend({slimScroll:function(h){var b=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},h);this.each(function(){function w(a){if(u){a=a||window.event;
var d=0;a.wheelDelta&&(d=-a.wheelDelta/120);a.detail&&(d=a.detail/3);e(a.target||a.srcTarget||a.srcElement).closest("."+b.wrapperClass).is(c.parent())&&l(d,!0);a.preventDefault&&!k&&a.preventDefault();k||(a.returnValue=!1)}}function l(a,e,h){k=!1;var f=a,g=c.outerHeight()-d.outerHeight();e&&(f=parseInt(d.css("top"))+a*parseInt(b.wheelStep)/100*d.outerHeight(),f=Math.min(Math.max(f,0),g),f=0<a?Math.ceil(f):Math.floor(f),d.css({top:f+"px"}));m=parseInt(d.css("top"))/(c.outerHeight()-d.outerHeight());
f=m*(c[0].scrollHeight-c.outerHeight());h&&(f=a,a=f/c[0].scrollHeight*c.outerHeight(),a=Math.min(Math.max(a,0),g),d.css({top:a+"px"}));c.scrollTop(f);c.trigger("slimscrolling",~~f);x();q()}function y(){v=Math.max(c.outerHeight()/c[0].scrollHeight*c.outerHeight(),30);d.css({height:v+"px"});var a=v==c.outerHeight()?"none":"block";d.css({display:a})}function x(){y();clearTimeout(B);m==~~m?(k=b.allowPageScroll,C!=m&&c.trigger("slimscroll",0==~~m?"top":"bottom")):k=!1;C=m;v>=c.outerHeight()?k=!0:(d.stop(!0,
!0).fadeIn("fast"),b.railVisible&&n.stop(!0,!0).fadeIn("fast"))}function q(){b.alwaysVisible||(B=setTimeout(function(){b.disableFadeOut&&u||z||A||(d.fadeOut("slow"),n.fadeOut("slow"))},1E3))}var u,z,A,B,g,v,m,C,k=!1,c=e(this);if(c.parent().hasClass(b.wrapperClass)){var p=c.scrollTop(),d=c.closest("."+b.barClass),n=c.closest("."+b.railClass);y();if(e.isPlainObject(h)){if("height"in h&&"auto"==h.height){c.parent().css("height","auto");c.css("height","auto");var r=c.parent().parent().height();c.parent().css("height",
r);c.css("height",r)}if("scrollTo"in h)p=parseInt(b.scrollTo);else if("scrollBy"in h)p+=parseInt(b.scrollBy);else if("destroy"in h){d.remove();n.remove();c.unwrap();return}l(p,!1,!0)}}else if(!(e.isPlainObject(h)&&"destroy"in h)){b.height="auto"==b.height?c.parent().height():b.height;p=e("<div></div>").addClass(b.wrapperClass).css({position:"relative",overflow:"hidden",width:b.width,height:b.height});c.css({overflow:"hidden",width:b.width,height:b.height});c.css("-ms-touch-action","none");c.css("touch-action",
"none");var n=e("<div></div>").addClass(b.railClass).css({width:b.size,height:"100%",position:"absolute",top:0,display:b.alwaysVisible&&b.railVisible?"block":"none","border-radius":b.railBorderRadius,background:b.railColor,opacity:b.railOpacity,zIndex:90}),d=e("<div></div>").addClass(b.barClass).css({background:b.color,width:b.size,position:"absolute",top:0,opacity:b.opacity,display:b.alwaysVisible?"block":"none","border-radius":b.borderRadius,BorderRadius:b.borderRadius,MozBorderRadius:b.borderRadius,
WebkitBorderRadius:b.borderRadius,zIndex:99}),r="right"==b.position?{right:b.distance}:{left:b.distance};n.css(r);d.css(r);c.wrap(p);c.parent().append(d);c.parent().append(n);b.railDraggable&&d.bind("mousedown",function(a){var b=e(document);A=!0;t=parseFloat(d.css("top"));pageY=a.pageY;b.bind("mousemove.slimscroll",function(a){currTop=t+a.pageY-pageY;d.css("top",currTop);l(0,d.position().top,!1)});b.bind("mouseup.slimscroll",function(a){A=!1;q();b.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",
function(a){a.stopPropagation();a.preventDefault();return!1});n.hover(function(){x()},function(){q()});d.hover(function(){z=!0},function(){z=!1});c.hover(function(){u=!0;x();q()},function(){u=!1;q()});window.PointerEvent?(c.bind("pointerdown",function(a,b){"touch"===a.originalEvent.pointerType&&(g=a.pageY)}),c.bind("pointermove",function(a){"touch"===a.originalEvent.pointerType&&(k||a.originalEvent.preventDefault(),l((g-a.pageY)/b.touchScrollStep,!0),g=a.pageY)})):window.msPointerEnabled?(c.bind("MSPointerDown",
function(a,b){g=a.originalEvent.pageY}),c.bind("MSPointerMove",function(a){"touch"===a.originalEvent.pointerType&&(k||a.originalEvent.preventDefault(),l((g-a.originalEvent.pageY)/b.touchScrollStep,!0),g=a.originalEvent.pageY)})):(c.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(g=a.originalEvent.touches[0].pageY)}),c.bind("touchmove",function(a){k||a.originalEvent.preventDefault();a.originalEvent.touches.length&&(l((g-a.originalEvent.touches[0].pageY)/b.touchScrollStep,!0),g=a.originalEvent.touches[0].pageY)}));
y();"bottom"===b.start?(d.css({top:c.outerHeight()-d.outerHeight()}),l(0,!0)):"top"!==b.start&&(l(e(b.start).position().top,null,!0),b.alwaysVisible||d.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",w,!1),this.addEventListener("mousewheel",w,!1)):document.attachEvent("onmousewheel",w)}});return this}});e.fn.extend({slimscroll:e.fn.slimScroll})})(jQuery);
